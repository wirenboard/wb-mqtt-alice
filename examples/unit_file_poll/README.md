# FilePoll demo

Это **не production-код** !!

Данное демо показывает работу `FilePollAdapter` из `wb_alice_config`.

Адаптер периодически читает JSON-файл и для каждого ключа
эмитит `RawDownstreamMessage`.

## Назначение

Демо используется для:

- ручной проверки downstream-адаптера
- отладки внутренней модели сообщений
- понимания формата `RawDownstreamMessage`

## Запуск

Из корня репозитория, если хотим видеть результат каждого polling:

```powershell
> python3 -m examples.unit_file_poll.run
```

Если хотим видеть только изменения в файле, а не каждый polling - то добавляем флаг:

```powershell
> python3 -m examples.unit_file_poll.run --only-changes
```

По умолчанию читается файл `demo.json` из текущей директории демо.

## Использование

Во время работы демо можно менять содержимое `demo.json`.
При изменении значений в консоль будет выведено новое сообщение.

Пример - если в файле было:

```json
{
  "temperature": 22.0,
  "relay": true
}
```

И вы поменяли внутри файла значения и стало

```json
{
  "temperature": 23.0,
  "relay": true
}
```

То в консоли выведется сообщение что изменено одно значение и показано:

- Имя адаптера
- Адрес изменения
- Новое значение

```shell
[2026-01-08 08:56:37.865Z] downstream='file_poll' address='temperature' payload=23.0
```

## Примечания

- JSON должен быть валидным
- корневой элемент — объект
- при редактировании файла возможны кратковременные ошибки парсинга
