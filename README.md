# Клиент для интеграции контроллера Wiren Board с умным домом Яндекса

**Интеграция работает только при использовании русского языка в веб-интерфейсе контроллера.**

[Официальная документация](https://wiki.wirenboard.com/wiki/Yandex-smart-home)

Кратко о назначении клиента:

- `wb-mqtt-alice-config` — конфигуратор устройств.
- `wb-mqtt-alice-client` — клиент, обеспечивающий работу интеграции.

## Установка пакета на контроллер

Перейдите в релиз [_testing_](https://wiki.wirenboard.com/wiki/Testing).

Если пакет не установился на контроллере после обновления, попробуйте выполнить:

```terminal
apt update && apt full-upgrade
```

## Добавление интеграции в Яндексе

- В приложении «Дом» с Алисой нажмите в правом верхнем углу «+» и выберите «Устройство умного дома».
- В поле поиска найдите навык «Wiren Board» и выберите его.
- Обновите список устройств.

## Удаление интеграции

Если интеграция с Алисой не нужна, её можно удалить:

1. Отвяжите контроллер. На странице привязанных контроллеров нажмите на красный крестик рядом с нужным контроллером.
2. Удалите пакет:

```terminal
apt purge wb-mqtt-alice
```
3. Запретите автоматическую установку при обновлении:

```terminal
apt-mark hold wb-mqtt-alice
```

Если интеграцию потребуется восстановить, снимите блокировку и установите пакет:

```terminal
apt-mark unhold wb-mqtt-alice
apt install wb-mqtt-alice
```

Для просмотра логов сервиса удобно использовать `journalctl`:

```terminal
journalctl -u wb-mqtt-alice-client.service -f
```

## Отвязка контроллера

Если невозможно отвязать контроллер со страницы привязанных контроллеров (например, был утрачен доступ к учётной записи Яндекса), можно воспользоваться утилитой `wb-mqtt-alice`:

```terminal
wb-mqtt-alice --unlink-controller
```